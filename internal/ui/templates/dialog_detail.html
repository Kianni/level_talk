{{ define "dialog_detail.html" }}
<article class="panel">
  <a href="/" class="link">&larr; Back</a>
  <h2>{{ dialogName .Dialog.Title .Dialog.InputLanguage .Dialog.DialogLanguage .Dialog.CEFRLevel .Dialog.InputWords }}</h2>
  <dl class="meta">
    <div>
      <dt>Input language</dt>
      <dd>{{ .Dialog.InputLanguage }}</dd>
    </div>
    <div>
      <dt>Dialog language</dt>
      <dd>{{ .Dialog.DialogLanguage }}</dd>
    </div>
    <div>
      <dt>CEFR</dt>
      <dd>{{ .Dialog.CEFRLevel }}</dd>
    </div>
    <div>
      <dt>Created</dt>
      <dd>{{ formatTime .Dialog.CreatedAt }}</dd>
    </div>
  </dl>
  <section class="vocabulary-section">
    <h3>Vocabulary</h3>
    <p class="muted">Words from {{ .Dialog.InputLanguage }} → {{ .Dialog.DialogLanguage }}:</p>
    <div class="vocabulary-list">
      {{ range .Dialog.InputWords }}
      {{ $word := . }}
      {{ $translation := index $.Dialog.Translations $word }}
      <div class="vocab-item">
        <span class="vocab-word">{{ $word }}</span>
        {{ if $translation }}
        <span class="vocab-arrow">→</span>
        <span class="vocab-translation">{{ $translation }}</span>
        {{ else }}
        <span class="vocab-arrow">→</span>
        <span class="vocab-translation muted">(translation in dialog)</span>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </section>
  <section>
    {{ range .Dialog.Turns }}
    <div class="turn">
      <strong>{{ .Speaker }}</strong>
      <p>{{ .Text }}</p>
      <audio controls preload="metadata" src="{{ safeURL .AudioURL }}">
        Your browser does not support the audio element.
      </audio>
    </div>
    {{ end }}
  </section>
</article>
{{ end }}


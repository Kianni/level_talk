{{ define "dialog_detail.html" }}
<article class="panel">
  <a href="{{ url .BasePath "/" }}" class="link">&larr; {{ t .Lang "back" }}</a>
  <h2>{{ dialogName .Dialog.Title .Dialog.InputLanguage .Dialog.DialogLanguage .Dialog.CEFRLevel .Dialog.InputWords }}</h2>
  <dl class="meta">
    <div>
      <dt>{{ t .Lang "input_language_label" }}</dt>
      <dd>{{ .Dialog.InputLanguage }}</dd>
    </div>
    <div>
      <dt>{{ t .Lang "dialog_language_label" }}</dt>
      <dd>{{ .Dialog.DialogLanguage }}</dd>
    </div>
    <div>
      <dt>{{ t .Lang "cefr" }}</dt>
      <dd>{{ .Dialog.CEFRLevel }}</dd>
    </div>
    <div>
      <dt>{{ t .Lang "created" }}</dt>
      <dd>{{ formatTime .Dialog.CreatedAt }}</dd>
    </div>
  </dl>
  <section class="vocabulary-section">
    <h3>{{ t .Lang "vocabulary" }}</h3>
    <p class="muted">{{ t .Lang "words_from" }} {{ .Dialog.InputLanguage }} → {{ .Dialog.DialogLanguage }}:</p>
    <div class="vocabulary-list">
      {{ range .Dialog.InputWords }}
      {{ $word := . }}
      {{ $translation := index $.Dialog.Translations $word }}
      <div class="vocab-item">
        <span class="vocab-word">{{ $word }}</span>
        {{ if $translation }}
        <span class="vocab-arrow">→</span>
        <span class="vocab-translation">{{ $translation }}</span>
        {{ else }}
        <span class="vocab-arrow">→</span>
        <span class="vocab-translation muted">{{ t $.Lang "translation_in_dialog" }}</span>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </section>
  <section>
    {{ range .Dialog.Turns }}
    <div class="turn">
      <strong>{{ .Speaker }}</strong>
      <p>{{ .Text }}</p>
      <audio controls preload="metadata" src="{{ safeURL .AudioURL }}">
        Your browser does not support the audio element.
      </audio>
    </div>
    {{ end }}
  </section>
</article>
{{ end }}

